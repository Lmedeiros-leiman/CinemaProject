@using CinemaProject.Data.Models;
@using CinemaProject.Data.Services;
@using CinemaProject.Components.MovieComponents;
@inject IMovieService MovieService


@using System.Text.Json;

<div class="container">
    <h2 class="text-center">Our current sessions</h2>
    <div class="row">
        @foreach (Movie movie in moviesWithSessions)
        {
            <section class="col card col-5 shadow-lg pt-3 ">
                <picture class="container-fluid-sm rounded-1">
                    <img width="100%" height="100%" class="rounded-1" src="assets/@movie.PosterImage.URLPath" />
                </picture>
                <h3>@movie.Title</h3>
                <p>@movie.Description</p>
                <p>@movie.ReleaseDate</p>
                <aside class="card">
                    @foreach (Session movieSession in movie.Sessions) {
                        <div class="row">
                            <div class="col">
                                @movieSession.SessionDate
                                <span> @movieSession.SessionTime</span>
                            </div>
                            <div class="col">
                                @(movieSession.SessionPrice),00 R$
                            </div>
                        </div>
                    }
                </aside>
            </section>
        }
        <div/>
    </div>
</div>



@code {



    List<Movie> moviesWithSessions = [];
    protected override async Task OnInitializedAsync()
    {
        moviesWithSessions = await MovieService.GetMoviesWithSessions();

    }


}

